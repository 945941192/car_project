		
    {% extends 'base2/base.html' %}
    {% block title %}专有云v2版本{% endblock %}
        {% block content %}

        <div class="page-title">
              <div class="title_left">
              </div>
        </div>

        <div class="clearfix"></div>

        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                    <div class="x_title">
                        <h2 align="center" style="float: inherit">专有云--{{version}}--{{project_name}}</h2>
                        <ul class="nav navbar-right panel_toolbox">
                            <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                <ul class="dropdown-menu" role="menu">
                                </ul>
                            </li>
                            <li><a class="close-link"><i class="fa fa-close"></i></a>
                            </li>
                        </ul>
                    </div>
                    <div class="x_content">
                        <p class="text-muted font-13 m-b-30"></p>

                        <table id="example" class="table table-striped table-bordered" cellspacing="0" width="100%">
                            <thead>                         
                            <tr>                            
                                <th  style="text-align:center;">序号</th>                
                                <th  style="text-align:center;">主机名称</th>                
                                <th  style="text-align:center;">检测次数</th>               
                                <th  style="text-align:center;">健康值  </th>            
                                <th  style="text-align:center;">描述信息</th>               
                            </tr>                           
                            </thead>                                                                  
                            <tbody>                         
                                {% for info in project_host_set %}
                                <tr>                            
                                    <td><a class="a_style" href="{% url 'aliyun:host' %}?version={{version}}&&project_name={{project_name}}&&host_id={{info.host_id}}&&host_name={{info.host_address}}"><i class="fa fa-link"></i> {{ info.host_address }}</a></td>
                                    <td>{{ info.check_host_count }}</td> 
                                    <td>
                                        <div class="progress progress-striped" style="margin-bottom: 0px;">
                                            {% if info.av_health_index_num >= 80 %}
                                                <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{ info.av_health_index_num }}%;">
                                                    <span>{{ info.av_health_index_num }}</span>
                                                </div>
                                                {% elif info.av_health_index_num < 80 and info.av_health_index_num >= 60 %}
                                                <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{ info.av_health_index_num }}%;">
                                                    <span>{{ info.av_health_index_num }}</span>
                                                </div>
                                                {% elif info.av_health_index_num <= 60  %}
                                                <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{ info.av_health_index_num }}%;">
                                                    <span>{{ info.newest_check_health_num }}</span>
                                                </div>
                                            {% endif %}
                                        </div> 
                                    </td> 
                                    {% if info.host_description == None %}
                                        <td>无</td> 
                                    {% else %}
                                        <td>{{ info.host_description }}</td> 
                                    {% endif %}
                                </tr>                           
                                {% endfor %}
                            </tbody>                        
                        </table>     
                  </div>
                </div>
              </div>
            </div>


            {% endblock %}


		



        {% block extrajs %}
		<script type="text/javascript">
            $(document).ready(function() {
                $('#example').DataTable( {
//                    "searching": false,
                    "serverSide": true,
                    "ajax":{
                        "url":"{% url 'aliyun:project' %}?version={{version}}&project_name={{project_name}}",
                        "type":"POST",
                    },
                    "columns":[
                        {"data":"num"},
                        {"data":"host_address"},
                        {"data":"check_host_count"},
                        {"data":"av_health_index_num"},
                        {"data":"host_description"},
                    ],
                    "oLanguage": {
                        "sLengthMenu": "每页显示 _MENU_ 条记录",
                        "sZeroRecords": "抱歉， 没有找到",
                        "sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",
                        "sInfoEmpty": "没有数据",
                        "sInfoFiltered": "(从 _TOTAL_ 条数据中检索)",
                        "oPaginate": {
                            "sFirst": "首页",
                            "sPrevious": "前一页",
                            "sNext": "后一页",
                            "sLast": "尾页"
                        },
                        "sZeroRecords": "没有检索到数据"
                    }, 
                    "order": [[ 3, 'desc'  ],],
                    "columnDefs": [
                        { "orderable": false, "targets": 0  },
                        { "orderable": false, "targets": 1  },
                        { "orderable": false, "targets": 2  },
                        { "orderable": false, "targets": 4  }
                    ],
                    "createdRow": function( row, data, dataIndex ) {
                        $(row).children('td').eq(0).attr('style', 'text-align: center; vertical-align: middle;width:10%')
                        $(row).children('td').eq(1).attr('style', 'text-align: center; vertical-align: middle;width:25%')
                        $(row).children('td').eq(2).attr('style', 'text-align: center; vertical-align: middle;width:10%')
                        $(row).children('td').eq(3).attr('style', 'text-align: center; vertical-align: middle;width:35%')
                        $(row).children('td').eq(4).attr('style', 'text-align: center; vertical-align: middle;width:20%')
                    },

                });

            });
            

        </script>
	
        {% endblock %}	

