		
    {% extends 'base2/base.html' %}
    {% block title %}专有云报表{% endblock %}
        {% block content %}

        <div class="page-title">
              <div class="" style="width: 100%;float: left;display: block;">
                    <h3 align="center">专有云 - 最新检测数据 - 统计</h3>
              </div>
        </div>

        <div class="clearfix"></div>

        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                    <div class="x_title">
                        <h2>专有云 <small>v2、v3版本健康平均统计及其各版本中项目健康统计排序 </small></h2>
                        <ul class="nav navbar-right panel_toolbox">
                            <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                <ul class="dropdown-menu" role="menu">
                                </ul>
                            </li>
                            <li><a class="close-link"><i class="fa fa-close"></i></a>
                            </li>
                        </ul>
                        <div class="clearfix"></div>
                    </div>
                    <div class="x_content">
                        <p class="text-muted font-13 m-b-30"></p>

                <div id="container" style="min-width: 400px;height: 400px;"></div>

                  </div>
                </div>
              </div>
            </div>
                    <div id="data" style="display:None">{{data | safe}}</div>
                    <div id="series" style="display:None">{{series | safe}}</div>

<br>

        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                    <div class="x_title">
                        <h2>专有云 <small>v2、v3版本主机数量分布：根据健康值分布(0 ~ 60 、60 ~ 80 、80 ~ 100) </small></h2>
                        <ul class="nav navbar-right panel_toolbox">
                            <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                <ul class="dropdown-menu" role="menu">
                                </ul>
                            </li>
                            <li><a class="close-link"><i class="fa fa-close"></i></a>
                            </li>
                        </ul>
                        <div class="clearfix"></div>
                    </div>
                    <div class="x_content">
                        <p class="text-muted font-13 m-b-30"></p>

                <div id="container2" style="min-width: 310px; max-width: 800px; height: 400px; margin: 0 auto"></div>

                  </div>
                </div>
              </div>
            </div>

<br>

        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                    <div class="x_title">
                        <h2>专有云 <small>主机数量分布：根据最近检测项统计排序 </small></h2>
                        <ul class="nav navbar-right panel_toolbox">
                            <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                <ul class="dropdown-menu" role="menu">
                                </ul>
                            </li>
                            <li><a class="close-link"><i class="fa fa-close"></i></a>
                            </li>
                        </ul>
                        <div class="clearfix"></div>
                    </div>
                    <div class="x_content">
                        <p class="text-muted font-13 m-b-30"></p>
                <div id="container3" style="min-width:400px;height:400px"></div>

                  </div>
                </div>
              </div>
            </div>

            {% endblock %}

		



        {% block extrajs %}
		<script type="text/javascript">

           

$(function () {
    var data = $("#data").html();
    var data = eval("("+data+")")
    var series_data = $("#series").html()
    var series_data = eval("("+series_data+")")
    // Create the chart
    Highcharts.chart('container', {
        chart: {
            type: 'column'
        },
        title: {
            text: '专有云各版本最近一次检测健康值统计图' 
        },
        subtitle: {
            text: '点击可查看专有云版本历史统计数据 :  <a href="{% url 'aliyun:cloud_version' %}">扁鹊专有云</a>'
        },
        xAxis: {
            type: 'category'
        },
        yAxis: {
            title: {
                text: '检测健康值'
            }
        },
        legend: {
            enabled: false
        },
        plotOptions: {
            series: {
                borderWidth: 0,
                dataLabels: {
                    enabled: true,
                    format: '{point.y}'
                },
                animation: {
                    duration: 2000
                }
            }
        },
        tooltip: {
            headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
            pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y}</b><br/>'
        },
        series: [{
            name: '云版本',
            colorByPoint: true,
            data: data,
        }],
        drilldown: {
            series:series_data,
        }
    });
});


$(function () {
    var brandsData = {{brandsData | safe}}
    var drilldownSeries = {{drilldownSeries | safe}}
    Highcharts.chart("container2",{     
                chart: {
                    type: 'pie'
                },
                title: {
                    text: '专有云版本主机健康分布'
                },
                subtitle: {
                    text: '点击可查看专有云版本历史统计数据 :  <a href="{% url 'aliyun:cloud_version' %}">扁鹊专有云</a>'
                },
                plotOptions: {
                    series: {
                        dataLabels: {
                            enabled: true,
                            format: '{point.name}: {point.y}台'
                        },
                        animation: {
                            duration: 2000
                        }
                    }
                },
                tooltip: {
                    headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                    pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y}台</b><br/>'
                },
                series: [{
                    name: '版本',
                    colorByPoint: true,
                    data: brandsData
                }],
                drilldown: {
                    series: drilldownSeries
                }
    });
});

$(function () {
    var check_sord_info = {{check_sord_info|safe}}
    $('#container3').highcharts({
        chart: {
            type: 'column'
        },
        title: {
            text: '项目检查项统计报表（检查为失败的选项）'
        },
        subtitle: {
            text: '点击可查看专有云版本历史统计数据 :  <a href="{% url 'aliyun:cloud_version' %}">扁鹊专有云</a>'
        },
        xAxis: {
            type: 'category',
            labels: {
                rotation: -45,
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: '数量（台）'
            }
        },
        legend: {
            enabled: false
        },
        tooltip: {
            pointFormat: '失败主机数数: <b>{point.y} 台</b>'
        },
        series: [{
            name: '检查项失败主机数',
            data: check_sord_info,
            dataLabels: {
                enabled: true,
                //rotation: -90,
               // color: '#FFFFFF',
                //align: 'right',
                format: '{point.y}', // one decimal
                //y: 100, // 10 pixels down from the top
                //style: {
                  //  fontSize: '13px',
                   // fontFamily: 'Verdana, sans-serif'
               // }
            },
        colorByPoint: true
        }],
    });
});









        </script>
	
        {% endblock %}	

